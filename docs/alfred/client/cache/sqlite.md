# Sqlite

[alfred Index](../../../README.md#alfred-index) /
[Alfred](../../index.md#alfred) /
[Client](../index.md#client) /
[Cache](./index.md#cache) /
Sqlite

> Auto-generated documentation for [alfred.client.cache.sqlite](../../../../alfred/client/cache/sqlite.py) module.

- [Sqlite](#sqlite)
  - [SQLiteCache](#sqlitecache)
- [TODO: Make response (de)serializable such that it fits in to the entries](#todo:-make-response-(de)serializable-such-that-it-fits-in-to-the-entries)
    - [SQLiteCache().fetch_data](#sqlitecache()fetch_data)
    - [SQLiteCache().load](#sqlitecache()load)
    - [SQLiteCache().read](#sqlitecache()read)
    - [SQLiteCache().read_batch](#sqlitecache()read_batch)
    - [SQLiteCache().read_by_metadata](#sqlitecache()read_by_metadata)
    - [SQLiteCache().read_by_prompt](#sqlitecache()read_by_prompt)
    - [SQLiteCache().read_by_prompt_and_metadata](#sqlitecache()read_by_prompt_and_metadata)
    - [SQLiteCache().read_by_prompts_and_metadata](#sqlitecache()read_by_prompts_and_metadata)
    - [SQLiteCache().save](#sqlitecache()save)
    - [SQLiteCache().to_pandas](#sqlitecache()to_pandas)
    - [SQLiteCache().write](#sqlitecache()write)
    - [SQLiteCache().write_batch](#sqlitecache()write_batch)

## SQLiteCache

[Show source in sqlite.py:12](../../../../alfred/client/cache/sqlite.py#L12)

In-memory/local storage key-value store caching system using SQLite

The cache operates in memory and is periodically saved to disk.

The cache's main components are a 3-column table that contains:
    - prompt: the serialized prompt that was used to generate the response
    - metadata: the metadata associated with the prompt
    - response: the serialized response generated by the prompt

# TODO: Make response (de)serializable such that it fits in to the entries

#### Signature

```python
class SQLiteCache(Cache):
    def __init__(
        self,
        session_name: str = "prompt-session-0",
        cache_location: Optional[str] = None,
    ):
        ...
```

#### See also

- [Cache](./cache.md#cache)

### SQLiteCache().fetch_data

[Show source in sqlite.py:94](../../../../alfred/client/cache/sqlite.py#L94)

Wrapper function for fetching data with specific sql suffix and args

#### Arguments

- `sql_suffix` - The sql suffix to use
:type sql_suffix: str
- `args` - The args to use
:type args: Any

#### Returns

The fetched data records as List. Will return empty list if no records found
Type: *List*

#### Signature

```python
def fetch_data(self, sql_suffix: str, *args: Any) -> List:
    ...
```

### SQLiteCache().load

[Show source in sqlite.py:227](../../../../alfred/client/cache/sqlite.py#L227)

Load the cache from a file

#### Arguments

- `path` - (optional) The path to load the cache from. If not provided, will load from the path provided at initialization
:type path: str

#### Signature

```python
def load(self, path: Optional[str] = None):
    ...
```

### SQLiteCache().read

[Show source in sqlite.py:165](../../../../alfred/client/cache/sqlite.py#L165)

Read records from the cache by prompt and metadata

#### Arguments

- `prompt` - The prompt to read
:type prompt: str
- `metadata` - (optional) The metadata to read
:type metadata: str

#### Returns

The records as a list
Type: *List*

#### Signature

```python
def read(self, prompt: str, metadata: Optional[str] = None) -> List:
    ...
```

### SQLiteCache().read_batch

[Show source in sqlite.py:183](../../../../alfred/client/cache/sqlite.py#L183)

Read a batch of values from the cache by prompt

return responses, new_q_idx, _new_queries

TODO: Need to reimplement this to support unided responses

#### Arguments

- `prompts` - The prompts to read
:type prompts: List[str]
- `metadata` - (optional) The metadata to read
:type metadata: str

#### Returns

The responses as a list
Type: *List*

#### Signature

```python
def read_batch(self, prompts: List[str], metadata: Optional[str] = None) -> List:
    ...
```

### SQLiteCache().read_by_metadata

[Show source in sqlite.py:154](../../../../alfred/client/cache/sqlite.py#L154)

Read records from the cache by metadata

#### Arguments

- `metadata` - The metadata to read
:type metadata: str

#### Returns

The records as a list
Type: *List*

#### Signature

```python
def read_by_metadata(self, metadata: str) -> List:
    ...
```

### SQLiteCache().read_by_prompt

[Show source in sqlite.py:113](../../../../alfred/client/cache/sqlite.py#L113)

Read records from the cache by prompt

#### Arguments

- `prompt` - The prompt to read
:type prompt: str

#### Returns

The records as a list
Type: *List*

#### Signature

```python
def read_by_prompt(self, prompt: str) -> List:
    ...
```

### SQLiteCache().read_by_prompt_and_metadata

[Show source in sqlite.py:124](../../../../alfred/client/cache/sqlite.py#L124)

Read records from the cache by prompt and metadata

#### Arguments

- `prompt` - The prompt to read
:type prompt: str
- `metadata` - The metadata to read
:type metadata: str

#### Returns

The records as a list
Type: *List*

#### Signature

```python
def read_by_prompt_and_metadata(self, prompt: str, metadata: str) -> List:
    ...
```

### SQLiteCache().read_by_prompts_and_metadata

[Show source in sqlite.py:138](../../../../alfred/client/cache/sqlite.py#L138)

Read records from the cache by list of prompts and metadata

#### Arguments

- `prompts` - The list of prompts to read
:type prompts: List[str]
- `metadata` - The metadata to read
:type metadata: str

#### Returns

The records as a list
Type: *List*

#### Signature

```python
def read_by_prompts_and_metadata(self, prompts: List[str], metadata: str) -> List:
    ...
```

### SQLiteCache().save

[Show source in sqlite.py:218](../../../../alfred/client/cache/sqlite.py#L218)

Save the cache to a file

#### Arguments

- `path` - (optional) The path to save the cache to. If not provided, will save to the path provided at initialization
:type path: str

#### Signature

```python
def save(self, path: Optional[str] = None):
    ...
```

### SQLiteCache().to_pandas

[Show source in sqlite.py:209](../../../../alfred/client/cache/sqlite.py#L209)

Return the cache db as a pandas dataframe

#### Returns

The cache db as a pandas dataframe
Type: *pd.DataFrame*

#### Signature

```python
def to_pandas(self) -> pd.DataFrame:
    ...
```

### SQLiteCache().write

[Show source in sqlite.py:54](../../../../alfred/client/cache/sqlite.py#L54)

Write a prompt, response, and metadata record to the cache

#### Arguments

- `prompt` - The prompt to write
:type prompt: str
- `response` - The response to write
:type response: str
- `metadata` - (optional) The metadata to write
:type metadata: str

#### Signature

```python
def write(self, prompt: str, response: str, metadata: Optional[str] = None):
    ...
```

### SQLiteCache().write_batch

[Show source in sqlite.py:74](../../../../alfred/client/cache/sqlite.py#L74)

Write a batch of serialized prompt, serialized response, and metadata records to the cache

#### Arguments

- `prompts` - The serialized prompts to write
:type prompts: List[str]
- `responses` - The serialized responses to write
:type responses: List[str]
- `metadata` - (optional) The metadata to write
:type metadata: str

#### Signature

```python
def write_batch(
    self, prompts: List[str], responses: List[str], metadata: Optional[str] = None
):
    ...
```


